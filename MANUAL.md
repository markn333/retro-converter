# Retro VDP Converter ユーザーマニュアル

## はじめに

Retro VDP Converterは、お手持ちの画像をレトロゲーム機の画面仕様に変換するWebアプリケーションです。スーパーファミコン、ファミコン、メガドライブなど12種類のゲーム機に対応しています。

## 起動方法

### PC（ローカル）

1. `index.html` をダブルクリックしてブラウザで開く

または、ローカルサーバーで起動（PWA機能を使う場合は必須）：

```bash
cd C:\Users\markn\retro-converter
python -m http.server 8080
```

ブラウザで `http://localhost:8080` にアクセス

### スマートフォン（iPhone/Android）

同じWi-Fiネットワーク内のPCでサーバーを起動：

```bash
cd C:\Users\markn\retro-converter
python -m http.server 8080 --bind 0.0.0.0
```

スマートフォンのブラウザで `http://[PCのIPアドレス]:8080` にアクセス

> **IPアドレスの確認方法**: コマンドプロンプトで `ipconfig` を実行

## PWA（アプリ化）

本アプリはPWA（Progressive Web App）対応です。ホーム画面に追加すると、ネイティブアプリのように動作します。

### PWAの特徴

| 機能 | 説明 |
|------|------|
| ホーム画面追加 | アプリアイコンから起動可能 |
| フルスクリーン | ブラウザUIなしで表示 |
| オフライン対応 | 一度読み込めばオフラインでも動作 |

### ホーム画面に追加（iOS）

1. **Safari**でアプリを開く（Chromeでは不可）
2. 共有ボタン（□↑）をタップ
3. 下にスクロールして「ホーム画面に追加」を選択
4. 名前を確認して「追加」をタップ

### ホーム画面に追加（Android）

1. **Chrome**でアプリを開く
2. メニュー（⋮）をタップ
3. 「ホーム画面に追加」または「アプリをインストール」を選択
4. 確認して「追加」をタップ

### ホーム画面に追加（PC - Chrome）

1. Chromeでアプリを開く
2. アドレスバー右側のインストールアイコンをクリック
3. 「インストール」をクリック

## 言語設定

画面右上のドロップダウンメニューから表示言語を選択できます。

### 対応言語

| 言語 | 表示名 |
|------|--------|
| 日本語 | 日本語 |
| English | English |
| 中文 | 中文 |
| 한국어 | 한국어 |

### 自動検出

初回アクセス時は、ブラウザの言語設定を自動的に検出して適用します。例えば、ブラウザが英語設定の場合は英語UIが表示されます。

### 言語の保存

選択した言語はブラウザに保存されるため、次回アクセス時も同じ言語で表示されます。

## 基本操作

### 1. 画像を選択

![画像選択エリア]

- **クリック/タップ**: ファイル選択ダイアログが開きます
- **ドラッグ&ドロップ**: 画像ファイルをエリアにドロップ

対応形式: PNG, JPG, GIF, WebP

### 2. ゲーム機を選択

ドロップダウンメニューから変換先のゲーム機を選択します。

| カテゴリ | 機種 |
|----------|------|
| Nintendo | スーパーファミコン, ファミコン, ゲームボーイ, ゲームボーイカラー, ゲームボーイアドバンス |
| SEGA | メガドライブ, マスターシステム, ゲームギア |
| NEC | PCエンジン |
| MSX | MSX1, MSX2 |
| その他 | ネオジオ |

### 3. 変換設定

#### 解像度

各ゲーム機でサポートされている解像度を選択します。

例（スーパーファミコン）:
- 256×224（標準）
- 256×239
- 512×224（高解像度）
- 512×448（インターレース）

#### カラーモード

使用する色数を選択します。

例（スーパーファミコン）:
- Mode 3/4（256色）
- Mode 1/2（16色）
- Mode 0（4色）

#### ディザリング

色の階調を滑らかに見せる処理方法を選択します。

| 方式 | 説明 | 特徴 |
|------|------|------|
| なし | ディザリングなし | シャープだが色の境界がはっきり |
| Floyd-Steinberg | 誤差拡散法 | 自然なグラデーション、写真向き |
| Ordered (Bayer) | 規則的パターン | レトロ感のある見た目、イラスト向き |

#### アスペクト比

画像のリサイズ方法を選択します。

| モード | 説明 |
|--------|------|
| フィット | 画像全体が収まるようにリサイズ（黒帯あり） |
| フィル | 画面を埋めるようにリサイズ（トリミングあり） |
| 引き伸ばし | アスペクト比を無視して引き伸ばし |

#### タイルグリッド表示

チェックを入れると、8×8（またはネオジオは16×16）のタイル境界を表示します。ドット絵を描く際のガイドとして使用できます。

### 4. プレビュー確認

設定を変更すると、リアルタイムで変換結果がプレビューされます。

- **元画像**: アップロードした元の画像
- **変換後**: 選択したゲーム機仕様に変換された画像

### 5. パレット確認

変換に使用されている色パレットが表示されます。各色にマウスオーバー/タップすると RGB 値が確認できます。

### 6. ダウンロード

「変換画像をダウンロード」ボタンをクリックすると、PNG形式で画像が保存されます。

ファイル名: `{機種名}_converted.png`

## 活用例

### ドット絵の下絵作成

1. イラストや写真を読み込む
2. 対象のゲーム機を選択
3. ディザリングを「Ordered」に設定
4. タイルグリッドを表示
5. ダウンロードしてドット絵エディタで仕上げ

### レトロ風画像の作成

1. 現代の写真を読み込む
2. ゲームボーイを選択（4色グレースケール）
3. ディザリングを「Floyd-Steinberg」に設定
4. SNS投稿用にダウンロード

### ゲーム開発の素材確認

1. 作成した素材画像を読み込む
2. ターゲット機種を選択
3. 実機での表示イメージを確認
4. 色数やサイズの調整が必要か判断

## トラブルシューティング

### 画像が読み込めない

- **原因**: 非対応のファイル形式
- **対処**: PNG, JPG, GIF, WebP形式に変換してから読み込み

### 変換結果が表示されない

- **原因**: ブラウザのメモリ不足
- **対処**: ページをリロード、または小さい画像で試す

### スマートフォンからアクセスできない

- **原因**: 異なるネットワーク、またはファイアウォール
- **対処**:
  - 同じWi-Fiに接続しているか確認
  - PCのファイアウォールでポート8080を許可
  - IPアドレスが正しいか確認（`ipconfig`で確認）

### 色が期待と異なる

- **原因**: 固定パレット機種（NES, GB, MSX1）では最適な色が選択されない場合がある
- **対処**: 元画像の色をあらかじめ調整、またはディザリング方式を変更

## 各ゲーム機の特徴と推奨設定

### スーパーファミコン
- **特徴**: 豊富な色数、半透明対応
- **推奨**: 256色モード + Floyd-Steinbergディザリング

### ファミコン
- **特徴**: 64色固定パレット、独特の色味
- **推奨**: 25色モード + Orderedディザリング（レトロ感重視）

### ゲームボーイ
- **特徴**: 4色グレースケール、緑がかった色味
- **推奨**: Floyd-Steinbergディザリング（階調表現重視）

### メガドライブ
- **特徴**: 512色から64色、彩度の高い色
- **推奨**: 64色モード + Floyd-Steinbergディザリング

### ネオジオ
- **特徴**: 4096色同時表示、16×16タイル
- **推奨**: 4096色モード + ディザリングなし

## キーボードショートカット（PC）

現在のバージョンではキーボードショートカットは未実装です。

## テスト

### テストページの実行

開発者向けにブラウザベースのテストページを用意しています。

```bash
# ブラウザで開く（Windows）
start test.html

# またはサーバー経由
http://localhost:8080/test.html
```

### テスト結果の見方

| 表示 | 意味 |
|------|------|
| Total | テスト総数 |
| OK | 成功したテスト数 |
| NG | 失敗したテスト数 |
| ALL TESTS PASSED | 全テスト成功（緑） |
| SOME TESTS FAILED | 一部失敗あり（赤） |

「テスト実行」ボタンで何度でも再実行できます。

## 技術仕様

詳細な技術仕様については `SPEC.md` を参照してください。

## 更新履歴

| バージョン | 更新内容 |
|------------|----------|
| 1.0.0 | 初版リリース。12機種対応 |
| 1.1.0 | PWA対応（オフライン動作、ホーム画面追加）、テストページ追加 |
| 1.2.0 | 多言語対応（日本語、英語、中国語、韓国語）、言語自動検出 |

## お問い合わせ

バグ報告や機能リクエストがございましたら、お気軽にご連絡ください。

---

© 2025 Retro VDP Converter
